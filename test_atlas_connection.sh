#!/bin/bash

echo "ğŸ§ª TEST DE CONNEXION MONGODB ATLAS"
echo "=================================="
echo ""

echo "ğŸ“‹ Ã‰TAPES Ã€ FAIRE AVANT CE TEST:"
echo "1. âœ… CrÃ©er compte MongoDB Atlas"
echo "2. âœ… CrÃ©er cluster gratuit (M0)"
echo "3. âœ… CrÃ©er utilisateur base de donnÃ©es"
echo "4. âœ… Autoriser accÃ¨s rÃ©seau (0.0.0.0/0)"
echo "5. âœ… RÃ©cupÃ©rer chaÃ®ne de connexion"
echo "6. âœ… Modifier /app/backend/.env avec ta chaÃ®ne Atlas"
echo "7. âœ… Uploader les donnÃ©es avec mongorestore"
echo ""

echo "ğŸ”§ COMMANDES DE TEST:"
echo ""
echo "# 1. Tester la connexion Atlas"
echo "mongosh \"TA_CHAINE_ATLAS\""
echo ""
echo "# 2. VÃ©rifier tes donnÃ©es"
echo "use avimarche_db"
echo "show collections"
echo "db.users.countDocuments({})"
echo "db.products.countDocuments({})"
echo ""
echo "# 3. RedÃ©marrer ton application"
echo "sudo supervisorctl restart backend"
echo ""
echo "# 4. Tester l'API"
echo "curl http://localhost:8001/api/stats/dashboard"
echo ""

echo "ğŸ‰ Si tout marche, tes donnÃ©es sont dans le cloud!"
echo "ğŸŒ Ton site pourra maintenant fonctionner en ligne!"